<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¾å¹´åˆ®åˆ®æ¨‚ï¼šå›å­è§£ç¢¼å™¨</title>
    <script src="https://unpkg.com/html5-qrcode"></script>
    <style>
        :root { 
            --red: #b91c1c; --gold: #fde047; --dark: #7f1d1d; 
        }
        body { 
            font-family: "Microsoft JhengHei", sans-serif; 
            background: var(--dark); color: #fefce8; 
            display: flex; justify-content: center; margin: 0; padding-top: 20px;
        }
        .container { 
            background: var(--red); padding: 30px; border-radius: 20px; 
            width: 90%; max-width: 400px; text-align: center; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.6); border: 3px solid var(--gold);
        }
        .meme-img { 
            width: 100%; border-radius: 12px; margin: 15px 0; border: 2px solid var(--gold); 
        }
        h2 { color: var(--gold); text-shadow: 2px 2px 4px rgba(0,0,0,0.5); }
        .hidden { display: none; }
        input { 
            width: 100%; padding: 14px; margin: 15px 0; border: 2px solid var(--gold); 
            border-radius: 12px; font-size: 18px; text-align: center; box-sizing: border-box;
        }
        button { 
            width: 100%; padding: 14px; background: var(--gold); color: var(--dark); 
            border: none; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 18px;
        }
        #display-result { font-size: 48px; margin: 20px 0; color: var(--gold); font-weight: 900; }
        .quote { font-style: italic; font-size: 14px; margin-bottom: 10px; opacity: 0.9; }
    </style>
</head>
<body>

<div class="container">
    <div id="login-zone" class="hidden">
        <h2>ğŸ§§ å–”ï¼Ÿæƒ³å·çœ‹è²¡é‹ï¼Ÿ</h2>
        <p class="quote">å­æ›°ï¼šã€Œäººè€Œç„¡ä¿¡ï¼Œä¸çŸ¥å…¶å¯ä¹Ÿã€‚ã€<br>æ„æ€æ˜¯ä½ æ²’å¯†ç¢¼å°±æƒ³åˆ®ï¼Œæˆ‘çœ‹ä½ æ˜¯åœ¨æƒ³æ¡ƒå­ã€‚</p>
        
        <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExNHJ4emZ5Nnd6dzZ6ZzR6ZzR6ZzR6ZzR6ZzR6ZzR6ZzR6ZzR6JmVwPXYxX2ludGVybmFsX2dpZl9ieV9pZCZjdD1n/26ghbWoXv3G6ypo8o/giphy.gif" class="meme-img">
        
        <input type="password" id="pw" placeholder="è¼¸å…¥é€šé—œç´…åŒ…å£ä»¤...">
        <button onclick="login()">é©—è­‰å›å­èº«ä»½</button>
    </div>

    <div id="main-zone" class="hidden">
        <div id="scan-view">
            <h2>ğŸ” å›å­è¦‹åˆ©æ€ç¾©</h2>
            <p>å°æº–åˆ®åˆ®æ¨‚ï¼Œè®“è²¡ç¥çˆºé¡¯éˆ</p>
            <div id="reader"></div>
        </div>
        
        <div id="result-view" class="hidden">
            <h2>ğŸ’° è²¡ç¥é™è‡¨</h2>
            <p>æ­¤å¼µåˆ®åˆ®æ¨‚çœŸèº«ç‚ºï¼š</p>
            <div id="display-result">--</div>
            <button onclick="showScanner()">ä¸‹ä¸€å¼µï¼Œå¤§å‰å¤§åˆ©</button>
        </div>
        <p style="cursor:pointer; font-size:12px; margin-top:20px; opacity:0.6" onclick="logout()">[ é€€å‡ºç³»çµ± / é¿å«Œ ]</p>
    </div>
</div>

<script>
    const MASTER_PW = "1234"; // è¨­å®šä½ çš„å¯†ç¢¼
    const MAPPING = {
        "k8v2": "ç·¨è™Ÿ 01", "m7x9": "ç·¨è™Ÿ 02", "r4w5": "ç·¨è™Ÿ 03", "t1n6": "ç·¨è™Ÿ 04", "b9z3": "ç·¨è™Ÿ 05",
        "p2q8": "ç·¨è™Ÿ 06", "h5j4": "ç·¨è™Ÿ 07", "g3k1": "ç·¨è™Ÿ 08", "f7s9": "ç·¨è™Ÿ 09", "d2m4": "ç·¨è™Ÿ 10",
        "c6v8": "ç·¨è™Ÿ 11", "x1b3": "ç·¨è™Ÿ 12", "n9m5": "ç·¨è™Ÿ 13", "l4k2": "ç·¨è™Ÿ 14", "j7h1": "ç·¨è™Ÿ 15",
        "g9f3": "ç·¨è™Ÿ 16", "d5s8": "ç·¨è™Ÿ 17", "a2p4": "ç·¨è™Ÿ 18", "q6w1": "ç·¨è™Ÿ 19", "e9r3": "ç·¨è™Ÿ 20",
        "t5y7": "ç·¨è™Ÿ 21", "u1i8": "ç·¨è™Ÿ 22", "o4p2": "ç·¨è™Ÿ 23", "a9s3": "ç·¨è™Ÿ 24", "d7f1": "ç·¨è™Ÿ 25",
        "g6h8": "ç·¨è™Ÿ 26", "j2k4": "ç·¨è™Ÿ 27", "l9z3": "ç·¨è™Ÿ 28", "x5c7": "ç·¨è™Ÿ 29", "v1b8": "ç·¨è™Ÿ 30",
        "n4m2": "ç·¨è™Ÿ 31", "q9w3": "ç·¨è™Ÿ 32", "e7r1": "ç·¨è™Ÿ 33", "t6y8": "ç·¨è™Ÿ 34", "u2i4": "ç·¨è™Ÿ 35",
        "o9p3": "ç·¨è™Ÿ 36", "a5s7": "ç·¨è™Ÿ 37", "d1f8": "ç·¨è™Ÿ 38", "g4h2": "ç·¨è™Ÿ 39", "j9k3": "ç·¨è™Ÿ 40",
        "l7z1": "ç·¨è™Ÿ 41", "x6c8": "ç·¨è™Ÿ 42", "v2b4": "ç·¨è™Ÿ 43", "n5m7": "ç·¨è™Ÿ 44", "q1w8": "ç·¨è™Ÿ 45",
        "e4r2": "ç·¨è™Ÿ 46", "t9y3": "ç·¨è™Ÿ 47", "u7i1": "ç·¨è™Ÿ 48", "o6p8": "ç·¨è™Ÿ 49", "a2s4": "ç·¨è™Ÿ 50"
    };

    let html5QrCode;
    window.onload = function() {
        if (localStorage.getItem('isLoggedIn') === 'true') {
            showMain();
            const id = new URLSearchParams(window.location.search).get('id');
            if (id) processCode(id);
        } else {
            document.getElementById('login-zone').classList.remove('hidden');
        }
    };

    function login() {
        if (document.getElementById('pw').value === MASTER_PW) {
            localStorage.setItem('isLoggedIn', 'true');
            location.reload();
        } else {
            alert("å­æ›°ï¼šã€æœ½æœ¨ä¸å¯é›•ä¹Ÿã€ï¼Œå¯†ç¢¼éƒ½æ‰“éŒ¯ã€‚");
        }
    }

    function logout() {
        localStorage.removeItem('isLoggedIn');
        location.reload();
    }

    function showMain() {
        document.getElementById('main-zone').classList.remove('hidden');
        html5QrCode = new Html5Qrcode("reader");
        html5QrCode.start({ facingMode: "environment" }, { fps: 10, qrbox: 250 }, (text) => {
            try { processCode(new URL(text).searchParams.get("id") || text); } catch(e) { processCode(text); }
        });
    }

    function processCode(code) {
        document.getElementById('display-result').innerText = MAPPING[code] || "éç¦®å‹¿æƒ";
        document.getElementById('scan-view').classList.add('hidden');
        document.getElementById('result-view').classList.remove('hidden');
        if (navigator.vibrate) navigator.vibrate(100);
    }

    function showScanner() {
        document.getElementById('result-view').classList.add('hidden');
        document.getElementById('scan-view').classList.remove('hidden');
        window.history.replaceState({}, '', window.location.pathname);
    }
</script>
</body>
</html>